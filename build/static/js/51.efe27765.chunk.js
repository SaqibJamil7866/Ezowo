(this.webpackJsonpJira=this.webpackJsonpJira||[]).push([[51],{1179:function(e,t,a){"use strict";a.r(t);var c=a(13),s=a(15),i=a(1),n=a(9),l=a(2),r=a.n(l),o=a(135),d=(a(482),a(567)),j=a(510),b=a.n(j),u=a(1066),m=a(1060),O=a(1081),p=a(144),h=a(98),f=a(10),x=function(e){var t=e.query,a=e.tasks,s=e.params,i=e.setSort,n=e.dispatch,l=e.setQuery,j=e.updateTask,x=e.selectTask,k=e.reOrderTasks,v=e.handleTaskSidebar,g=e.handleMainSidebar,N=function(e,t){e.preventDefault(),i(t),n(Object(p.d)(Object(c.a)(Object(c.a)({},s),{},{sortBy:t})))};return Object(f.jsxs)("div",{className:"todo-app-list",children:[Object(f.jsxs)("div",{className:"app-fixed-search d-flex align-items-center",children:[Object(f.jsx)("div",{className:"sidebar-toggle cursor-pointer d-block d-lg-none ms-1",onClick:g,children:Object(f.jsx)(m.a,{size:21})}),Object(f.jsx)("div",{className:"d-flex align-content-center justify-content-between w-100",children:Object(f.jsxs)(h.L,{className:"input-group-merge",children:[Object(f.jsx)(h.M,{children:Object(f.jsx)(O.a,{className:"text-muted",size:14})}),Object(f.jsx)(h.K,{placeholder:"Search Notes",value:t,onChange:function(e){l(e.target.value),n(Object(p.d)(Object(c.a)(Object(c.a)({},s),{},{q:e.target.value})))}})]})}),Object(f.jsxs)(h.wb,{children:[Object(f.jsx)(h.G,{className:"hide-arrow me-1",tag:"a",href:"/",onClick:function(e){return e.preventDefault()},children:Object(f.jsx)(u.a,{className:"text-body",size:16})}),Object(f.jsxs)(h.F,{end:!0,children:[Object(f.jsx)(h.E,{tag:o.b,to:"/",onClick:function(e){return N(e,"title-asc")},children:"Sort A-Z"}),Object(f.jsx)(h.E,{tag:o.b,to:"/",onClick:function(e){return N(e,"title-desc")},children:"Sort Z-A"}),Object(f.jsx)(h.E,{tag:o.b,to:"/",onClick:function(e){return N(e,"")},children:"Reset Sort"})]})]})]}),Object(f.jsx)(b.a,{className:"list-group todo-task-list-wrapper",options:{wheelPropagation:!1},containerRef:function(e){e&&(e._getBoundingClientRect=e.getBoundingClientRect,e.getBoundingClientRect=function(){var t=e._getBoundingClientRect();return Object(c.a)(Object(c.a)({},t),{},{height:Math.floor(t.height)})})},children:a.length?Object(f.jsx)(d.ReactSortable,{tag:"ul",list:a,handle:".drag-icon",className:"todo-task-list media-list",setList:function(e){return n(k(e))},children:a.map((function(e,t){return Object(f.jsx)("li",{onClick:function(){return t=e,console.log(t),n(x(t)),void v();var t},className:r()("todo-item",{completed:e.is_completed}),children:Object(f.jsx)("div",{className:"todo-title-wrapper",children:Object(f.jsxs)("div",{className:"todo-title-area",children:[Object(f.jsx)(u.a,{className:"drag-icon"}),Object(f.jsx)("div",{className:"form-check",children:Object(f.jsx)(h.K,{type:"checkbox",id:e.title,checked:e.is_completed,onClick:function(e){return e.stopPropagation()},onChange:function(t){t.stopPropagation(),n(j(Object(c.a)(Object(c.a)({},e),{},{is_completed:t.target.checked})))}})}),Object(f.jsx)("span",{className:"todo-title",children:e.title})]})})},"".concat(e.id,"-").concat(t))}))}):Object(f.jsx)("div",{className:"no-results show",children:Object(f.jsx)("h5",{children:"No Items Found"})})})]})},k=a(486),v=a(493),g=a(1057),N=a(1094),T=a(974),S=a(1100),C=function(e){var t=e.projects,a=e.handleTaskSidebar,n=e.setMainSidebar,l=e.mainSidebar,o=e.dispatch,d=e.params,j=Object(i.useState)(),u=Object(s.a)(j,2),m=u[0],O=u[1];Object(i.useEffect)((function(){O({id:0,title:"ALL",value:0,label:"ALL"})}),[]);var x=function(e){o(Object(p.d)(Object(c.a)(Object(c.a)({},d),{},{filter:e,project_id:m&&m?m.id:""})))},C=function(e){return!!(d.filter&&d.filter===e||d.tag&&d.tag===e)};return Object(f.jsx)("div",{className:r()("sidebar-left",{show:!0===l}),children:Object(f.jsx)("div",{className:"sidebar",children:Object(f.jsx)("div",{className:"sidebar-content todo-sidebar",children:Object(f.jsxs)("div",{className:"todo-app-menu",children:[Object(f.jsx)("div",{className:"add-task",children:Object(f.jsx)(h.i,{color:"primary",onClick:function(){a(),n()},block:!0,children:"Add Note"})}),Object(f.jsxs)("div",{className:"add-task",style:{paddingTop:"0px"},children:[Object(f.jsx)(h.N,{className:"form-label",for:"projects",children:"Select Project"}),Object(f.jsx)(v.a,{id:"projects",name:"projects",isClearable:!1,theme:k.l,options:t,value:m,onChange:function(e){!function(e){O(e),o(Object(p.d)(Object(c.a)(Object(c.a)({},d),{},{project_id:e&&e.id?e.id:""})))}(e)},style:{width:"84% !important",margin:"auto"},className:"react-select",classNamePrefix:"select"})]}),m&&m.id?Object(f.jsx)(b.a,{className:"sidebar-menu-list",options:{wheelPropagation:!1},children:Object(f.jsxs)(h.O,{tag:"div",className:"list-group-filters",children:[Object(f.jsxs)(h.P,{active:""===d.filter&&""===d.tag,onClick:function(){return x("")},children:[Object(f.jsx)(g.a,{className:"me-75",size:18}),Object(f.jsx)("span",{className:"align-middle",children:"All"})]}),Object(f.jsxs)(h.P,{active:C("important"),onClick:function(){return x("important")},children:[Object(f.jsx)(N.a,{className:"me-75",size:18}),Object(f.jsx)("span",{className:"align-middle",children:"Important"})]}),Object(f.jsxs)(h.P,{active:C("completed"),onClick:function(){return x("completed")},children:[Object(f.jsx)(T.a,{className:"me-75",size:18}),Object(f.jsx)("span",{className:"align-middle",children:"Completed"})]}),Object(f.jsxs)(h.P,{active:C("deleted"),onClick:function(){return x("deleted")},children:[Object(f.jsx)(S.a,{className:"me-75",size:18}),Object(f.jsx)("span",{className:"align-middle",children:"Deleted"})]})]})}):null]})})})})},_=(a(136),a(498),a(603)),y=a(971),w=(a(576),a(489)),E=a(580),A=(a(568),a(495),a(511),function(e){var t=e.children,a=e.store,c=e.handleTaskSidebar,s=e.setDeleted,i=e.deleted,n=e.important,l=e.setImportant,o=e.deleteTask,d=e.dispatch;return Object(f.jsxs)("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[Object(f.jsx)("h5",{className:"modal-title",children:t}),Object(f.jsxs)("div",{className:"todo-item-action d-flex align-items-center",children:[a&&!Object(k.i)(a.selectedTask)?Object(f.jsx)(S.a,{className:"cursor-pointer mt-25",size:16,onClick:function(){return s(!i),d(o(a.selectedTask.id)),void c()}}):null,Object(f.jsx)("span",{className:"todo-item-favorite cursor-pointer mx-75",children:Object(f.jsx)(N.a,{size:16,onClick:function(){return l(!n)},className:r()({"text-warning":!0===n})})}),Object(f.jsx)(y.a,{className:"fw-normal mt-25",size:16,onClick:c})]})]})}),L=function(e){var t,a=e.projects,n=e.open,l=e.handleTaskSidebar,r=e.store,o=e.dispatch,d=e.updateTask,j=e.selectTask,b=e.addTask,u=e.deleteTask,m=Object(i.useState)([]),O=Object(s.a)(m,2),p=O[0],x=O[1],g=Object(i.useState)({}),N=Object(s.a)(g,2),T=N[0],S=N[1],C=Object(i.useState)(E.EditorState.createEmpty()),y=Object(s.a)(C,2),L=y[0],P=y[1],R=Object(i.useState)(!1),z=Object(s.a)(R,2),D=z[0],F=z[1],M=Object(i.useState)(!1),B=Object(s.a)(M,2),q=B[0],I=B[1],J=Object(i.useState)(!1),K=Object(s.a)(J,2),Q=K[0],U=K[1],W=Object(i.useState)(new Date),V=Object(s.a)(W,2),Z=(V[0],V[1]),G=Object(w.e)({defaultValues:{title:""}}),H=G.control,X=G.setError,Y=G.setValue,$=G.clearErrors,ee=G.handleSubmit,te=G.formState.errors;Object(i.useEffect)((function(){r&&r.selectedTask&&r.selectedTask.project_id&&(console.log("TASKSidebar Store CALLED",r),S(a.filter((function(e){return e.id===r.selectedTask.project_id}))))}),[a,r]);var ae=function(){var e=E.EditorState.createWithContent(E.ContentState.createFromText(r.selectedTask.note));if(Y("title",r.selectedTask.title),P(e),F(r.selectedTask.is_completed),I(r.selectedTask.is_important),U(r.selectedTask.is_deleted),r.selectedTask.tags.length){var t=[];r.selectedTask.tags.map((function(e){var a;t.push({value:e,label:(a=e,a.charAt(0).toUpperCase()+a.slice(1))})})),x(t)}};return Object(f.jsx)(h.Q,{isOpen:n,toggle:l,className:"sidebar-lg",contentClassName:"p-0",onOpened:function(){var e=r.selectedTask;if(console.error("selected ",j.is_deleted),!Object(k.i)(e))if(Y("title",e.title),F(e.is_completed),I(e.is_important),U(e.is_deleted),"string"===typeof e.note)P(E.EditorState.createWithContent(E.ContentState.createFromText(e.note)));else{var t=e.note._immutable.currentContent.blockMap,a=Object.keys(t).map((function(e){return e}));P(E.EditorState.createWithContent(E.ContentState.createFromText(t[a].text)))}},onClosed:function(){x([]),P(""),Y("title",""),F(!1),I(!1),U(!1),Z(new Date),o(j({})),$()},modalClassName:"modal-slide-in sidebar-todo-modal",children:Object(f.jsxs)(h.H,{id:"form-modal-todo",className:"todo-modal",onSubmit:ee((function(e){var t,a,s,i=[];p.length&&p.map((function(e){return i.push(e.value)}));var n=L._immutable.currentContent.blockMap,j={title:e.title,tags:i,note:(null===n||void 0===n||null===(t=n._list)||void 0===t||null===(a=t._tail)||void 0===a||null===(s=a.array[0][1])||void 0===s?void 0:s.text)||"",is_completed:D,is_deleted:Q,is_important:q,project_id:T&&null!==T&&void 0!==T&&T.id?null===T||void 0===T?void 0:T.id:0};e.title.length?Object(k.i)(te)&&(Object(k.i)(r.selectedTask)||!Object(k.i)(r.selectedTask)&&!r.selectedTask.title.length?o(b(j)):o(d(Object(c.a)(Object(c.a)({},j),{},{id:r.selectedTask.id}))),l()):X("title",{type:"manual"})})),children:[Object(f.jsx)(A,{store:r,deleted:Q,dispatch:o,important:q,deleteTask:u,setDeleted:U,setImportant:I,handleTaskSidebar:l,children:r&&!Object(k.i)(r.selectedTask)?Object(f.jsx)(h.i,{outline:!0,size:"sm",onClick:function(){return F(!D)},color:!0===D?"success":"secondary",children:!0===D?"Completed":"Mark Complete"}):"Add Note"}),Object(f.jsxs)(h.R,{className:"flex-grow-1 pb-sm-0 pb-3",children:[Object(f.jsxs)("div",{className:"mb-1",children:[Object(f.jsx)(h.N,{className:"form-label",for:"task-project",children:"Projects"}),Object(f.jsx)(v.a,{id:"task-project",className:"react-select",classNamePrefix:"select",isClearable:!1,options:a,theme:k.l,value:T,isDisabled:null===r||void 0===r||null===(t=r.selectedTask)||void 0===t?void 0:t.id,onChange:function(e){S(e)}})]}),Object(f.jsxs)("div",{className:"mb-1",children:[Object(f.jsxs)(h.N,{className:"form-label",for:"task-title",children:["Title ",Object(f.jsx)("span",{className:"text-danger",children:"*"})]}),Object(f.jsx)(w.a,{name:"title",control:H,render:function(e){var t=e.field;return Object(f.jsx)(h.K,Object(c.a)({id:"task-title",placeholder:"Title",className:"new-todo-item-title",invalid:te.title&&!0},t))}}),te.title&&Object(f.jsx)(h.I,{children:"Please enter a valid task title"})]}),Object(f.jsxs)("div",{className:"mb-1",children:[Object(f.jsx)(h.N,{for:"task-desc",className:"form-label",children:"Note"}),Object(f.jsx)(_.Editor,{editorState:L,wrapperClassName:"toolbar-bottom",toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,options:["bold","italic","underline"]}},onEditorStateChange:function(e){P(e)}})]}),Object(f.jsx)("div",{children:r&&!Object(k.i)(r.selectedTask)?Object(f.jsxs)(i.Fragment,{children:[Object(f.jsx)(h.i,{color:"primary",className:"update-btn update-todo-item me-1",children:"Update"}),Object(f.jsx)(h.i,{color:"secondary",onClick:ae,outline:!0,children:"Reset"})]}):Object(f.jsxs)(i.Fragment,{children:[Object(f.jsx)(h.i,{color:"primary",className:"add-todo-item me-1",children:"Add"}),Object(f.jsx)(h.i,{color:"secondary",onClick:l,outline:!0,children:"Cancel"})]})})]})]})})},P=a(137),R=(a(862),a(508));t.default=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],o=Object(i.useState)(""),d=Object(s.a)(o,2),j=d[0],b=d[1],u=Object(i.useState)(""),m=Object(s.a)(u,2),O=m[0],h=m[1],k=Object(i.useState)(!1),v=Object(s.a)(k,2),g=v[0],N=v[1],T=Object(i.useState)(!1),S=Object(s.a)(T,2),_=S[0],y=S[1],w=Object(P.b)(),E=Object(P.c)((function(e){return e.todo})),A=Object(n.g)(),z={filter:A.filter||"",q:O||"",sortBy:j||"",tag:A.tag||""};z.project_id=E.params&&E.params.project_id?E.params.project_id:"";var D=function(){return N(!g)},F=function(){return y(!_)};return Object(i.useEffect)((function(){!function(){try{Object(R.i)({direction:"desc",sort:"id",active:1}).then((function(e){var t=null===e||void 0===e?void 0:e.response;if(t&&(200===t.code||400===t.code)&&t.data){var a=t.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{value:e.id,label:e.title})}));a.unshift({id:0,title:"ALL",value:0,label:"ALL"}),console.log(a),l(a)}}))}catch(e){console.error("ERROR")}}()}),[]),Object(i.useEffect)((function(){w(Object(p.d)({filter:A.filter||"",q:O||"",sortBy:j||"",tag:A.tag||"",project_id:E.params.project_id||""}))}),[]),Object(f.jsxs)(i.Fragment,{children:[Object(f.jsx)(C,{projects:a,store:E,params:z,dispatch:w,mainSidebar:g,urlFilter:A.filter,setMainSidebar:N,handleTaskSidebar:F}),Object(f.jsx)("div",{className:"content-right",children:Object(f.jsx)("div",{className:"content-wrapper",children:Object(f.jsxs)("div",{className:"content-body",children:[Object(f.jsx)("div",{className:r()("body-content-overlay",{show:!0===g}),onClick:D}),E?Object(f.jsx)(x,{store:E,tasks:E.tasks,sort:j,query:O,params:z,setSort:b,setQuery:h,dispatch:w,paramsURL:A,updateTask:p.g,selectTask:p.f,reOrderTasks:p.e,handleMainSidebar:D,handleTaskSidebar:F}):null,Object(f.jsx)(L,{projects:a.filter((function(e){return 0!==e.id})),store:E,params:z,addTask:p.a,dispatch:w,open:_,updateTask:p.g,selectTask:p.f,deleteTask:p.c,handleTaskSidebar:F})]})})})]})}},495:function(e,t,a){},568:function(e,t,a){},862:function(e,t,a){}}]);
//# sourceMappingURL=51.efe27765.chunk.js.map